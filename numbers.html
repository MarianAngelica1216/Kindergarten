<html>
    <head>
        <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@300..700&family=Poppins:wght@100..900&display=swap" rel="stylesheet">
        <style>
            body {
                background-image: url("images/numbers/bg-number.png");
                background-size: cover;
                background-repeat: no-repeat;
                background-attachment: fixed;
                position: relative;
                height: 100vh;
                overflow-y: hidden;
                margin: 0px;
                overflow-x: hidden; 
                font-family: fredoka;
            }

            .back-button {
                width: 90px;
                height: auto;
                position: absolute;
                top: 20px;
                left: 20px;
                cursor: pointer;
                z-index: 10;
            }
            
            /* Items container at the top */
            .items-container {
                position: absolute;
                top: 10px;
                left: 50%;
                transform: translateX(-50%);
                display: flex;
                gap: 10px;
                z-index: 30;
            }

            /* Customer behind the frame */
            .container-behind-counter {
                position: absolute;
                right: 120px;        
                top: 150px;        
                z-index: 1; /* Behind the stall */
            }

            .customer {
                max-width: 250px;
            }

            /* Frame/stall */
            .frame {
                position: absolute;
                top: -100px;
                left: 50%;
                transform: translateX(-50%);
                width: 117%;
                z-index: 2; 
                overflow: hidden;
                overflow-x: hidden;
            }

            /* Speech bubble at the top */
            .speech-bubble {
                position: absolute;
                bottom: 30px;
                left: 50%;
                transform: translateX(-50%);
                background: white;
                padding: 20px;
                border-radius: 50px;
                box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.2);
                font-size: 40px;
                font-weight: bold;
                z-index: 25;
            }

            .speech-bubble::after {
                content: "";
                position: absolute;
                bottom: -10px;
                left: 50%;
                transform: translateX(-50%);
                border-width: 10px;
                border-style: solid;
                border-color: white transparent transparent transparent;
            }

            .interaction-container {
                position: absolute;
                left: 10px;
                top: 50%;
                opacity: 0;
                z-index: 1;
            }

            .number-boxes {
                transform: translateX(-300%);
                top: 120px;
                position: relative;
                width: 170px;
                height: 150px;
                display: grid;
                grid-template-columns: repeat(2, 200px);
                grid-template-rows: repeat(2, 190px);
                gap: 20px;
            }
 
            .number-box {
                width: 200px;
                height: 190px;
                background-color: white;
                border: 4px solid;
                border-radius: 30px;
                display: flex;
                justify-content: center;
                align-items: center;
                font-size: 80px;
                font-weight: bold;
                color: black;
                transition: transform 0.3s ease;
                cursor: pointer;
            }

            .items-picture-container {
                position: absolute; 
                top: 50%; 
                left: 50%; 
                transform: translate(-30%, -50%);
                background-color: skyblue;
                width: 450px; 
                height: 400px;
                z-index: 5; 
                padding: 5px;
            }

            .items-picture-container img.apple {
                max-width: 80px;
                position: absolute;
            }

            /* Shuffle Button styling */
            .shuffle-button {
                position: absolute;
                bottom: 10px;
                right: 5px;
                font-size: 10px;
                cursor: pointer;
                z-index: 10;
                background-color: white;
                border: 2px solid #ccc;
                border-radius: 5px;
            }
        </style>
    </head>
    <body>
        <a href="javascript:history.back()" id="backButton">
            <img src="images/back.png" alt="Back" class="back-button" />
        </a>
        <!-- Items Container (At the Top) -->
        <div class="items-container">
            <div class="number-boxes">
                <div class="number-box red"></div>
                <div class="number-box blue"></div>
                <div class="number-box green"></div>
                <div class="number-box pink"></div>
            </div>
        </div>

        <!-- Items Picture Container with Shuffle Button -->
        <div class="items-picture-container" id="itemsContainer">
            <!-- Apples will be inserted here -->
            <button class="shuffle-button" id="shuffleButton">Shuffle</button>
        </div>

        <!-- Speech Bubble (At the Top) -->
        <div class="speech-bubble"></div>

        <!-- Customer (Behind the Stall) -->
        <div class="container-behind-counter">
            <img src="images/numbers/customers/1.png" class="customer">
        </div>

        <!-- Food Stall -->
        <img src="images/numbers/food-stall.png" class="frame">

        <script>
            function shuffleApples() {
    // Remove existing apple images
    itemsContainer.querySelectorAll('img.apple').forEach(img => img.remove());

    const count = Math.floor(Math.random() * 10) + 1;
    const appleSize = 80;
    const gap = 20;
    const maxCols = 4;

    const cols = Math.min(count, maxCols);
    const rows = Math.ceil(count / maxCols);

    const groupWidth = (cols * appleSize) + ((cols - 1) * gap);
    const groupHeight = (rows * appleSize) + ((rows - 1) * gap);

    const containerWidth = itemsContainer.clientWidth;
    const containerHeight = itemsContainer.clientHeight;

    const startX = (containerWidth - groupWidth) / 2;
    const startY = (containerHeight - groupHeight) / 2;

    for (let i = 0; i < count; i++) {
        const col = i % maxCols;
        const row = Math.floor(i / maxCols);

        const appleImg = document.createElement('img');
        appleImg.src = "images/apple.png";
        appleImg.classList.add("apple");
        appleImg.style.left = `${startX + col * (appleSize + gap)}px`;
        appleImg.style.top = `${startY + row * (appleSize + gap)}px`;

        itemsContainer.appendChild(appleImg);
    }
}
// Run once when the page loads
window.onload = shuffleApples;

// Reattach shuffle button event
document.getElementById('shuffleButton').addEventListener('click', shuffleApples);


        </script>
    </body>
</html>
